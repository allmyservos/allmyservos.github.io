<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fun with PWM: Metric.Metric Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ams.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="allmyservos.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fun with PWM
   &#160;<span id="projectnumber">0.30</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_metric_1_1_metric.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_metric_1_1_metric-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Metric.Metric Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Metrics are variables which can archive.  
 <a href="class_metric_1_1_metric.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for Metric.Metric:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_metric_1_1_metric.png" usemap="#Metric.Metric_map" alt=""/>
  <map id="Metric.Metric_map" name="Metric.Metric_map">
<area href="class_i_m_u_1_1_i_m_u_metric.html" title="Prefixes metric name for IMU. " alt="IMU.IMUMetric" shape="rect" coords="0,112,134,136"/>
<area href="class_notifier_1_1_notifier_metric.html" title="Notifier metric sets up the metric object for use with the notifier. " alt="Notifier.NotifierMetric" shape="rect" coords="144,112,278,136"/>
<area href="class_resource_1_1_resource.html" title="Sets up metric object for use with the resources class. " alt="Resource.Resource" shape="rect" coords="288,112,422,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a601eba8d52728546de76a49fc4956f59"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_metric_1_1_metric.html#a601eba8d52728546de76a49fc4956f59">__init__</a> (self, name, history=0, archive=True, batch=10)</td></tr>
<tr class="separator:a601eba8d52728546de76a49fc4956f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e9499665d61ac32ebca53405aa76220"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_metric_1_1_metric.html#a4e9499665d61ac32ebca53405aa76220">getInfo</a> (self)</td></tr>
<tr class="separator:a4e9499665d61ac32ebca53405aa76220"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f2ba10451a929635796d89e8648f35b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_metric_1_1_metric.html#a6f2ba10451a929635796d89e8648f35b">value</a> (self)</td></tr>
<tr class="separator:a6f2ba10451a929635796d89e8648f35b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd12a0f99e2ec9d2f8b208b0e5c50fe3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_metric_1_1_metric.html#afd12a0f99e2ec9d2f8b208b0e5c50fe3">value</a> (self, value)</td></tr>
<tr class="separator:afd12a0f99e2ec9d2f8b208b0e5c50fe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2b228b450748d65a11b1d1435c6e381"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_metric_1_1_metric.html#af2b228b450748d65a11b1d1435c6e381">hotValues</a> (self)</td></tr>
<tr class="separator:af2b228b450748d65a11b1d1435c6e381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d546e9247d076950efe016927e7ece"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_metric_1_1_metric.html#af8d546e9247d076950efe016927e7ece">clearValues</a> (self)</td></tr>
<tr class="separator:af8d546e9247d076950efe016927e7ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdf49e87d3f0f5063859ecaac4a1ab16"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_metric_1_1_metric.html#acdf49e87d3f0f5063859ecaac4a1ab16">loadValues</a> (self, start=None, end=None, resolution='hour')</td></tr>
<tr class="separator:acdf49e87d3f0f5063859ecaac4a1ab16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70fb2d18cc998dfdf89c2df857c740cd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_metric_1_1_metric.html#a70fb2d18cc998dfdf89c2df857c740cd">hasValues</a> (self, start, end)</td></tr>
<tr class="separator:a70fb2d18cc998dfdf89c2df857c740cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:adbb5927e4317734c0c296ae7bdd31907"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_metric_1_1_metric.html#adbb5927e4317734c0c296ae7bdd31907">getIndex</a> ()</td></tr>
<tr class="separator:adbb5927e4317734c0c296ae7bdd31907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67247589d62cdedb3dc78dba2399d2a8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_metric_1_1_metric.html#a67247589d62cdedb3dc78dba2399d2a8">index</a> (force=False)</td></tr>
<tr class="separator:a67247589d62cdedb3dc78dba2399d2a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af4de2dd805a35441609893616df308be"><td class="memItemLeft" align="right" valign="top"><a id="af4de2dd805a35441609893616df308be"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>name</b></td></tr>
<tr class="separator:af4de2dd805a35441609893616df308be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83cea0760b8ffea1ba57bb359ffb3d5f"><td class="memItemLeft" align="right" valign="top"><a id="a83cea0760b8ffea1ba57bb359ffb3d5f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>history</b></td></tr>
<tr class="separator:a83cea0760b8ffea1ba57bb359ffb3d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6553a72eef379f15eea2de51def3947d"><td class="memItemLeft" align="right" valign="top"><a id="a6553a72eef379f15eea2de51def3947d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>now</b></td></tr>
<tr class="separator:a6553a72eef379f15eea2de51def3947d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Metrics are variables which can archive. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a601eba8d52728546de76a49fc4956f59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a601eba8d52728546de76a49fc4956f59">&sect;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Metric.Metric.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>history</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>archive</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>batch</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Initializes a Metric object
A metric is like a variable but it collects changes and saves them in batches to an archive in CSV format. Older archives are compressed and added to cold storage.
This was designed to have as smaller footprint on CPU and RAM as possible while still recording every historic value

@param name - should be unique to each instance of the Metric class - characters which cannot be used as directory names will be stripped or replaced
@param history - the amount of time in milliseconds used to retain values in memory. 0 = no previous values, -1 = all previous values, 1000 = the last seconds worth
@param archive - create an archive of historic values for later examination
@param batch
</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af8d546e9247d076950efe016927e7ece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8d546e9247d076950efe016927e7ece">&sect;&nbsp;</a></span>clearValues()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Metric.Metric.clearValues </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">empties the list of values
metric.clearValues()
</pre> 
</div>
</div>
<a id="adbb5927e4317734c0c296ae7bdd31907"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbb5927e4317734c0c296ae7bdd31907">&sect;&nbsp;</a></span>getIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def Metric.Metric.getIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">gets the complete metrics index

@return dict
</pre> 
</div>
</div>
<a id="a4e9499665d61ac32ebca53405aa76220"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e9499665d61ac32ebca53405aa76220">&sect;&nbsp;</a></span>getInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Metric.Metric.getInfo </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">get metric info

@return dict
</pre> 
</div>
</div>
<a id="a70fb2d18cc998dfdf89c2df857c740cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70fb2d18cc998dfdf89c2df857c740cd">&sect;&nbsp;</a></span>hasValues()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Metric.Metric.hasValues </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">check for valies in time range

@param start
@param end

@return bool
</pre> 
</div>
</div>
<a id="af2b228b450748d65a11b1d1435c6e381"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2b228b450748d65a11b1d1435c6e381">&sect;&nbsp;</a></span>hotValues()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Metric.Metric.hotValues </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">gets all values in memory
x = metric.hotValues()

@return list
</pre> 
</div>
</div>
<a id="a67247589d62cdedb3dc78dba2399d2a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67247589d62cdedb3dc78dba2399d2a8">&sect;&nbsp;</a></span>index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def Metric.Metric.index </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>force</em> = <code>False</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">internal use only
indexes archive names and temperature (hot/cold) by date

@param force
</pre> 
</div>
</div>
<a id="acdf49e87d3f0f5063859ecaac4a1ab16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdf49e87d3f0f5063859ecaac4a1ab16">&sect;&nbsp;</a></span>loadValues()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Metric.Metric.loadValues </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>start</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>end</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>resolution</em> = <code>'hour'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">load historic values for this metric between the given times
metric.loadValues(time.time(),time.time())
start - time.time() float - seconds since unix epoc (subtract seconds for earlier values)
end - time.time() float - seconds since unix epoc (subtract seconds for earlier values)

@param start
@param end
@param resolution
</pre> 
</div>
</div>
<a id="a6f2ba10451a929635796d89e8648f35b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f2ba10451a929635796d89e8648f35b">&sect;&nbsp;</a></span>value() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Metric.Metric.value </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">gets the most up to date value of this metric
usage: x = metric.value

@return value
</pre> 
</div>
</div>
<a id="afd12a0f99e2ec9d2f8b208b0e5c50fe3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd12a0f99e2ec9d2f8b208b0e5c50fe3">&sect;&nbsp;</a></span>value() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Metric.Metric.value </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">sets the most up to date value and performs maintenance
metric.value = x
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Metric.py</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Metric</b></li><li class="navelem"><a class="el" href="class_metric_1_1_metric.html">Metric</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
